<div class="container">
    <div class="row">
        <div *ngIf="mode == 'mode_list'" class="panel panel-default">
            <div class="panel-heading">
                <h4>Выберите диалог</h4>
            </div>
            <div class="panel-body">
                <button class="btn btn-default" [ngClass]="{'btn-info': mode_select_dialog == 2}" (click)="showActiveDialogs()" [disabled]="loading"><span>Диалоги в ожидание игроков</span></button>
                <button class="btn btn-default" [ngClass]="{'btn-info': mode_select_dialog == 1}" (click)="showDialogs()" [disabled]="loading"><span>Все диалоги</span></button>
            
                <div *ngIf="mode_select_dialog == 1" class="row" style="margin: 20px 0;"> 
                    <div class="col-sm-6 col-md-4" *ngFor="let item of dialogs"> 
                        <div class="thumbnail"> 
                            <img alt="100%x200" data-src="holder.js/100%x200" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQyIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDI0MiAyMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MjAwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTVlOTZiYzA5NjUgdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMnB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNWU5NmJjMDk2NSI+PHJlY3Qgd2lkdGg9IjI0MiIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI4OS44NTkzNzUiIHk9IjEwNS40Ij4yNDJ4MjAwPC90ZXh0PjwvZz48L2c+PC9zdmc+" data-holder-rendered="true" style="height: 100px; width: 100%; display: block;"> 
                            <div class="caption"> 
                                <h3>{{item.name}}</h3> 
                                <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> 
                                <p>
                                    <button class="btn btn-primary" (click)="runDialog(item)">
                                        Запустить диалог и ждать игрока
                                    </button> 
                                </p> 
                            </div> 
                        </div> 
                    </div> 
                </div>


                <div *ngIf="mode_select_dialog == 2" class="row" style="margin: 20px 0;"> 
                    <div class="col-sm-6 col-md-4" *ngFor="let item of activedialogs"> 
                        <div class="thumbnail"> 
                            <img alt="100%x200" data-src="holder.js/100%x200" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQyIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDI0MiAyMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MjAwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTVlOTZiYzA5NjUgdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMnB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNWU5NmJjMDk2NSI+PHJlY3Qgd2lkdGg9IjI0MiIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI4OS44NTkzNzUiIHk9IjEwNS40Ij4yNDJ4MjAwPC90ZXh0PjwvZz48L2c+PC9zdmc+" data-holder-rendered="true" style="height: 100px; width: 100%; display: block;"> 
                            <div class="caption"> 
                                <h3>{{item.dialog?.name}}</h3> 
                                <p style="text-align: right;">{{item.master?.fio}}</p>
                                <p style="text-align: right;">запущено: {{item.created_at| date:"hh:mm dd-MM-yyyy"}}</p>
                                <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> 
                                <p>
                                    <button class="btn btn-primary" (click)="callDialog(item)">
                                        Войти
                                    </button> 
                                </p> 
                            </div> 
                        </div> 
                    </div> 
                </div>


            </div>
        </div>

        <div *ngIf="mode == 'mode_wait_pupil'">
            <modewaitpupil [user]="user" [activedialog]="activedialog" (stopwaitingdialog)="handelerStopWaitDialog($event)" (acceptcall)="handlerAcceptCall($event)"></modewaitpupil>
        </div>



        <div *ngIf="mode == 'mode_calling'">
            <modecalling [callingdialog]="callingdialog" (stopcalling)="handlerStopCalling($event)"></modecalling>
        </div>

        
        <div *ngIf="mode == 'mode_dialog_master'">
            <modedialogmaster [activedialogid]="activedialog_id" (stopdialog)="handelerStopDialog($event)"></modedialogmaster>
        </div>

        <div *ngIf="mode == 'mode_dialog_pupil'">
            <modedialogpupil [activedialogid]="activedialog_id" (stopdialog)="handelerStopDialog($event)"></modedialogpupil>
        </div>

    </div>
</div>

